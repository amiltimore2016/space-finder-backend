"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.handler = void 0;
const aws_sdk_1 = require("aws-sdk");
const uuid_1 = require("uuid");
const TABLE_NAME = process.env.TABLE_NAME;
const dbClient = new aws_sdk_1.DynamoDB.DocumentClient();
async function handler(event, context) {
    const result = {
        statusCode: 200,
        body: 'Hello from DynamoDB'
    };
    const item = typeof event.body == 'object' ? event.body : JSON.parse(event.body);
    item.spaceId = (0, uuid_1.v4)();
    try {
        await dbClient.put({
            TableName: TABLE_NAME,
            Item: item
        }).promise();
    }
    catch (error) {
        if (error instanceof Error) {
            result.body = error.message;
        }
    }
    result.body = JSON.stringify(`Created item with id: ${item.spaceId}`);
    return result;
}
exports.handler = handler;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3JlYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQ3JlYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHFDQUFrQztBQUVsQywrQkFBMEI7QUFFMUIsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUM7QUFDMUMsTUFBTSxRQUFRLEdBQUcsSUFBSSxrQkFBUSxDQUFDLGNBQWMsRUFBRSxDQUFDO0FBRS9DLEtBQUssVUFBVSxPQUFPLENBQUMsS0FBMkIsRUFBRSxPQUFnQjtJQUNoRSxNQUFNLE1BQU0sR0FBMEI7UUFDbEMsVUFBVSxFQUFFLEdBQUc7UUFDZixJQUFJLEVBQUUscUJBQXFCO0tBQzlCLENBQUE7SUFFRCxNQUFNLElBQUksR0FBRyxPQUFPLEtBQUssQ0FBQyxJQUFJLElBQUksUUFBUSxDQUFBLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFBLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMvRSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUEsU0FBRSxHQUFFLENBQUM7SUFFcEIsSUFBSTtRQUNBLE1BQU0sUUFBUSxDQUFDLEdBQUcsQ0FBQztZQUNmLFNBQVMsRUFBRSxVQUFXO1lBQ3RCLElBQUksRUFBRSxJQUFJO1NBQ2IsQ0FDQSxDQUFDLE9BQU8sRUFBRSxDQUFBO0tBQ2Q7SUFBQyxPQUFPLEtBQUssRUFBRTtRQUNaLElBQUksS0FBSyxZQUFZLEtBQUssRUFBRTtZQUM1QixNQUFNLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUE7U0FDMUI7S0FDSjtJQUNELE1BQU0sQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyx5QkFBeUIsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUE7SUFFckUsT0FBTyxNQUFNLENBQUE7QUFDakIsQ0FBQztBQUVRLDBCQUFPIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRHluYW1vREIgfSBmcm9tICdhd3Mtc2RrJ1xuaW1wb3J0IHsgQVBJR2F0ZXdheVByb3h5RXZlbnQsIEFQSUdhdGV3YXlQcm94eVJlc3VsdCwgQ29udGV4dCB9IGZyb20gJ2F3cy1sYW1iZGEnXG5pbXBvcnQgeyB2NCB9IGZyb20gJ3V1aWQnO1xuXG5jb25zdCBUQUJMRV9OQU1FID0gcHJvY2Vzcy5lbnYuVEFCTEVfTkFNRTtcbmNvbnN0IGRiQ2xpZW50ID0gbmV3IER5bmFtb0RCLkRvY3VtZW50Q2xpZW50KCk7XG5cbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIoZXZlbnQ6IEFQSUdhdGV3YXlQcm94eUV2ZW50LCBjb250ZXh0OiBDb250ZXh0KTogUHJvbWlzZTxBUElHYXRld2F5UHJveHlSZXN1bHQ+e1xuICAgIGNvbnN0IHJlc3VsdDogQVBJR2F0ZXdheVByb3h5UmVzdWx0ID0ge1xuICAgICAgICBzdGF0dXNDb2RlOiAyMDAsXG4gICAgICAgIGJvZHk6ICdIZWxsbyBmcm9tIER5bmFtb0RCJ1xuICAgIH1cblxuICAgIGNvbnN0IGl0ZW0gPSB0eXBlb2YgZXZlbnQuYm9keSA9PSAnb2JqZWN0Jz8gZXZlbnQuYm9keTogSlNPTi5wYXJzZShldmVudC5ib2R5KTtcbiAgICBpdGVtLnNwYWNlSWQgPSB2NCgpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgZGJDbGllbnQucHV0KHtcbiAgICAgICAgICAgIFRhYmxlTmFtZTogVEFCTEVfTkFNRSEsXG4gICAgICAgICAgICBJdGVtOiBpdGVtXG4gICAgICAgIH1cbiAgICAgICAgKS5wcm9taXNlKClcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICByZXN1bHQuYm9keSA9IGVycm9yLm1lc3NhZ2VcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXN1bHQuYm9keSA9IEpTT04uc3RyaW5naWZ5KGBDcmVhdGVkIGl0ZW0gd2l0aCBpZDogJHtpdGVtLnNwYWNlSWR9YClcblxuICAgIHJldHVybiByZXN1bHRcbn1cblxuZXhwb3J0IHsgaGFuZGxlciB9Il19